html = """<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Redux Toolkit + TypeScript — Como tipar a action (PayloadAction)</title>
  <style>
    :root{
      --bg:#0b1020;
      --card:#111a33;
      --muted:#9fb0d0;
      --text:#e8eefc;
      --accent:#77a6ff;
      --accent2:#7dffb2;
      --border:rgba(255,255,255,.10);
      --code:#0a0f1f;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius:18px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background: radial-gradient(1200px 600px at 20% 10%, rgba(119,166,255,.25), transparent 60%),
                  radial-gradient(900px 500px at 80% 0%, rgba(125,255,178,.16), transparent 55%),
                  var(--bg);
      color:var(--text);
      line-height:1.55;
    }
    header{
      padding:48px 18px 18px;
      max-width: 1100px;
      margin: 0 auto;
    }
    .badge{
      display:inline-flex;
      gap:10px;
      align-items:center;
      padding:8px 12px;
      border:1px solid var(--border);
      border-radius:999px;
      color:var(--muted);
      background: rgba(255,255,255,.03);
      backdrop-filter: blur(8px);
      font-size: 13px;
    }
    h1{
      margin:14px 0 10px;
      font-size: clamp(28px, 3.4vw, 44px);
      letter-spacing: -0.02em;
      line-height:1.1;
    }
    .subtitle{
      color: var(--muted);
      max-width: 68ch;
      font-size: 16px;
      margin: 0 0 18px;
    }
    .grid{
      max-width: 1100px;
      margin: 0 auto;
      padding: 18px;
      display:grid;
      grid-template-columns: 1fr;
      gap: 16px;
    }
    @media (min-width: 900px){
      .grid{grid-template-columns: 1.1fr .9fr;}
    }
    .card{
      border: 1px solid var(--border);
      background: rgba(255,255,255,.03);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .card .hd{
      padding: 16px 16px 0;
    }
    .card h2{
      margin:0 0 8px;
      font-size: 18px;
      letter-spacing: -0.01em;
    }
    .card p, .card li{
      color: var(--muted);
      margin: 0 0 10px;
      font-size: 14.5px;
    }
    .card .bd{
      padding: 0 16px 16px;
    }
    .rule{
      display:flex;
      gap:10px;
      align-items:flex-start;
      padding:12px 14px;
      border:1px dashed rgba(255,255,255,.16);
      border-radius: 14px;
      background: rgba(0,0,0,.18);
      margin-top: 12px;
    }
    .dot{
      width:10px;height:10px;border-radius:50%;
      margin-top:5px;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      box-shadow: 0 0 0 3px rgba(119,166,255,.15);
      flex: 0 0 auto;
    }
    pre{
      margin: 12px 0 0;
      padding: 14px 14px;
      background: var(--code);
      border: 1px solid rgba(255,255,255,.10);
      border-radius: 14px;
      overflow:auto;
      color: var(--text);
      font-size: 13.2px;
      line-height: 1.5;
    }
    code{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;}
    .kpi{
      display:flex;
      gap:12px;
      flex-wrap: wrap;
      margin-top: 10px;
    }
    .pill{
      padding:8px 10px;
      border-radius: 999px;
      border:1px solid var(--border);
      background: rgba(255,255,255,.03);
      color: var(--muted);
      font-size: 13px;
    }
    .pill strong{color:var(--text)}
    footer{
      max-width:1100px;
      margin: 0 auto;
      padding: 10px 18px 44px;
      color: rgba(159,176,208,.75);
      font-size: 13px;
    }
    a{color: var(--accent); text-decoration: none;}
    a:hover{text-decoration: underline;}
  </style>
</head>
<body>
  <header>
    <span class="badge">Redux Toolkit • TypeScript • Tipagem de <code>action</code> com <code>PayloadAction&lt;T&gt;</code></span>
    <h1>Como tipar a <code>action</code> no Redux Toolkit (com TypeScript)</h1>
    <p class="subtitle">
      No Redux Toolkit, você quase nunca “tipa a action inteira”. Em vez disso, você tipa o
      <strong>payload</strong> usando <code>PayloadAction&lt;T&gt;</code>. A partir daí, o TypeScript garante que
      <code>action.payload</code> tenha o tipo correto em todos os reducers.
    </p>
  </header>

  <main class="grid">
    <section class="card">
      <div class="hd">
        <h2>1) Tipando reducers no <code>createSlice</code></h2>
        <p>Tem payload? Use <code>PayloadAction&lt;TipoDoPayload&gt;</code>. Não tem payload? Nem precisa receber <code>action</code>.</p>
      </div>
      <div class="bd">
        <div class="rule">
          <span class="dot"></span>
          <div>
            <p style="margin:0"><strong>Regra prática:</strong> <code>(state, action: PayloadAction&lt;T&gt;)</code> ➜ <code>action.payload</code> é <code>T</code>.</p>
          </div>
        </div>

        <pre><code>import { createSlice, PayloadAction } from "@reduxjs/toolkit";

type Usuario = { id: string; name: string; idade: number };

type UsuarioState = {
  lista: Usuario[];
  loading: boolean;
  error: string | null;
};

const initialState: UsuarioState = {
  lista: [],
  loading: false,
  error: null,
};

const usuarioSlice = createSlice({
  name: "usuario",
  initialState,
  reducers: {
    // ✅ payload é Usuario
    addUsuario(state, action: PayloadAction&lt;Usuario&gt;) {
      state.lista.push(action.payload);
    },

    // ✅ payload é string (id)
    removeUsuario(state, action: PayloadAction&lt;string&gt;) {
      state.lista = state.lista.filter(u =&gt; u.id !== action.payload);
    },

    // ✅ payload é um objeto com campos específicos
    updateUsuarioNome(
      state,
      action: PayloadAction&lt;{ id: string; name: string }&gt;
    ) {
      const u = state.lista.find(x =&gt; x.id === action.payload.id);
      if (u) u.name = action.payload.name;
    },

    // ✅ action sem payload
    clearError(state) {
      state.error = null;
    },
  },
});

export const {
  addUsuario,
  removeUsuario,
  updateUsuarioNome,
  clearError
} = usuarioSlice.actions;

export default usuarioSlice.reducer;</code></pre>

        <div class="kpi">
          <span class="pill"><strong>Dica:</strong> use <code>PayloadAction&lt;T&gt;</code> sempre que existir <code>payload</code></span>
          <span class="pill"><strong>Sem payload:</strong> remova o parâmetro <code>action</code></span>
        </div>
      </div>
    </section>

    <aside class="card">
      <div class="hd">
        <h2>Erros que o TS vai evitar</h2>
        <p>Quando o payload está tipado, o TypeScript bloqueia dispatch errado e acesso a campos inexistentes.</p>
      </div>
      <div class="bd">
        <pre><code>// ✅ correto
dispatch(addUsuario({ id: "1", name: "Ana", idade: 20 }));

// ❌ errado: esperado Usuario, mas recebeu string
dispatch(addUsuario("qualquer coisa"));

// ❌ errado: idade deve ser number
dispatch(addUsuario({ id: "1", name: "Ana", idade: "20" }));</code></pre>

        <div class="rule">
          <span class="dot"></span>
          <div>
            <p style="margin:0">
              Você ganha validação automática em: reducers, actions geradas, e chamadas de <code>dispatch</code>.
            </p>
          </div>
        </div>
      </div>
    </aside>

    <section class="card">
      <div class="hd">
        <h2>2) Tipando <code>action</code> no <code>extraReducers</code> com <code>createAsyncThunk</code></h2>
        <p>Em thunks, o payload do <code>fulfilled</code> já vem tipado pelo primeiro tipo genérico do thunk.</p>
      </div>
      <div class="bd">
        <pre><code>import { createAsyncThunk, createSlice } from "@reduxjs/toolkit";

type Usuario = { id: string; name: string; idade: number };

export const fetchUsuarios = createAsyncThunk&lt;Usuario[]&gt;(
  "usuario/fetchUsuarios",
  async () =&gt; {
    const res = await fetch("/api/usuarios");
    return (await res.json()) as Usuario[];
  }
);

type UsuarioState = {
  lista: Usuario[];
  loading: boolean;
  error: string | null;
};

const initialState: UsuarioState = {
  lista: [],
  loading: false,
  error: null,
};

const usuarioSlice = createSlice({
  name: "usuario",
  initialState,
  reducers: {},
  extraReducers: builder =&gt; {
    builder
      .addCase(fetchUsuarios.pending, state =&gt; {
        state.loading = true;
        state.error = null;
      })
      .addCase(fetchUsuarios.fulfilled, (state, action) =&gt; {
        // ✅ action.payload é Usuario[]
        state.loading = false;
        state.lista = action.payload;
      })
      .addCase(fetchUsuarios.rejected, (state, action) =&gt; {
        state.loading = false;
        state.error = action.error.message ?? "Erro ao buscar usuários";
      });
  },
});

export default usuarioSlice.reducer;</code></pre>

        <div class="rule">
          <span class="dot"></span>
          <div>
            <p style="margin:0"><strong>Resumo:</strong> no <code>fulfilled</code>, o tipo de <code>action.payload</code> vem do <code>createAsyncThunk&lt;TipoAqui&gt;</code>.</p>
          </div>
        </div>
      </div>
    </section>

    <section class="card">
      <div class="hd">
        <h2>3) Tipando <code>dispatch</code> e <code>selector</code> (pra ficar 100%)</h2>
        <p>Crie <code>RootState</code> e <code>AppDispatch</code> no store e use hooks tipados.</p>
      </div>
      <div class="bd">
        <pre><code>// store.ts
import { configureStore } from "@reduxjs/toolkit";
import usuarioReducer from "./usuarioSlice";

export const store = configureStore({
  reducer: {
    usuario: usuarioReducer,
  },
});

export type RootState = ReturnType&lt;typeof store.getState&gt;;
export type AppDispatch = typeof store.dispatch;</code></pre>

        <pre><code>// hooks.ts
import { TypedUseSelectorHook, useDispatch, useSelector } from "react-redux";
import type { RootState, AppDispatch } from "./store";

export const useAppDispatch = () =&gt; useDispatch&lt;AppDispatch&gt;();
export const useAppSelector: TypedUseSelectorHook&lt;RootState&gt; = useSelector;</code></pre>

        <pre><code>// uso no componente
const dispatch = useAppDispatch();
const lista = useAppSelector(state =&gt; state.usuario.lista);

dispatch(addUsuario({ id: "1", name: "Ana", idade: 20 }));</code></pre>
      </div>
    </section>
  </main>

  <footer>
    Feito para referência rápida. Se quiser, me mande seu <code>slice</code> (interfaces + reducers) e eu adapto a tipagem certinha pro seu caso.
  </footer>
</body>
</html>
