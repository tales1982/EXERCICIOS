;/*FB_PKG_DELIM*/

__d("MAWSyncState",["Promise"],(function(a,b,c,d,e,f){"use strict";var g=!1,h=function(){};a=function(a){g=a};c=new(b("Promise"))(function(a){h=a});d=function(){return h};e=function(){return g};f.setInitSyncExecuted=a;f.waitForInitialSync=c;f.getMarkInitSyncComplete=d;f.getIsInitialSyncComplete=e}),66);
__d("MAWEBSwitch",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1=!1}var b=a.prototype;b.set=function(a){this.$1=a;return this.$1};b.isEnabled=function(){return this.$1};return a}();b=new a();c=b;f["default"]=c}),66);
__d("MessagingThreadType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=[0,17];c=[0,18];d=[0,19];e=[0,20];var g=[0,21],h=[0,22],i=[0,23],j=[0,24],k=[0,25],l=[0,150],m=[0,151],n=[0,152],o=[0,153];b=b("bs_caml_int64").one;var p=[0,2],q=[0,3],r=[0,4],s=[0,5],t=[0,6],u=[0,7],v=[0,8],w=[0,10],x=[0,11],y=[0,13],z=[0,14],A=[0,15],B=[0,16],C=[0,101],D=[0,102],E=[0,200];f.communityFolder=a;f.communityGroup=c;f.communityGroupUnjoined=d;f.communityChannelCategory=e;f.communityPrivateHiddenJoinedThread=g;f.communityPrivateHiddenUnjoinedThread=h;f.communityBroadcastJoinedThread=i;f.communityBroadcastUnjoinedThread=j;f.communityGroupInvitedUnjoined=k;f.discoverablePublicChat=l;f.discoverablePublicChatUnjoined=m;f.discoverablePublicBroadcastChat=n;f.discoverablePublicBroadcastChatUnjoined=o;f.oneToOne=b;f.group=p;f.room=q;f.montage=r;f.marketplace=s;f.folder=t;f.tincanOneToOne=u;f.tincanGroupDisappearing=v;f.carrierMessagingOneToOne=w;f.carrierMessagingGroup=x;f.tincanOneToOneDisappearing=y;f.pageFollowUp=z;f.secureMessageOverWaOneToOne=A;f.secureMessageOverWaGroup=B;f.pinned=C;f.lwg=D;f.xacGroup=E}),null);
__d("LSMessagingThreadTypeUtil.bs",["LSThreadBitOffset.bs","LSThreadCapabilityBitOffset.bs","LsSystemFolder.bs","MWCMThreadTypes.bs","MessagingThreadType.bs","bs_caml"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(c("bs_caml").i64_eq(a,d("MessagingThreadType.bs").group)||c("bs_caml").i64_eq(a,d("MessagingThreadType.bs").tincanGroupDisappearing)||c("bs_caml").i64_eq(a,d("MessagingThreadType.bs").secureMessageOverWaGroup)||c("bs_caml").i64_eq(a,d("MessagingThreadType.bs").marketplace)||d("MWCMThreadTypes.bs").isAnyCMThread(a)||c("bs_caml").i64_eq(a,d("MessagingThreadType.bs").room)||c("bs_caml").i64_eq(a,d("MessagingThreadType.bs").discoverablePublicChat)||c("bs_caml").i64_eq(a,d("MessagingThreadType.bs").discoverablePublicChatUnjoined))return!0;else return!1}function b(a){if(c("bs_caml").i64_eq(a,d("MessagingThreadType.bs").oneToOne)||c("bs_caml").i64_eq(a,d("MessagingThreadType.bs").tincanOneToOne)||c("bs_caml").i64_eq(a,d("MessagingThreadType.bs").carrierMessagingOneToOne)||c("bs_caml").i64_eq(a,d("MessagingThreadType.bs").tincanOneToOneDisappearing)||c("bs_caml").i64_eq(a,d("MessagingThreadType.bs").secureMessageOverWaOneToOne))return!0;else return!1}function e(a){if(c("bs_caml").i64_eq(a,d("MessagingThreadType.bs").secureMessageOverWaOneToOne)||c("bs_caml").i64_eq(a,d("MessagingThreadType.bs").secureMessageOverWaGroup))return!0;else return!1}function f(a){a=a.NAME;if(a==="Group")return d("MessagingThreadType.bs").group;else if(a==="User"||a==="Page")return d("MessagingThreadType.bs").oneToOne;else return d("MessagingThreadType.bs").tincanOneToOne}function h(a){if(c("bs_caml").i64_eq(a,d("MessagingThreadType.bs").secureMessageOverWaOneToOne)||c("bs_caml").i64_eq(a,d("MessagingThreadType.bs").secureMessageOverWaGroup)||c("bs_caml").i64_eq(a,d("MessagingThreadType.bs").oneToOne)||c("bs_caml").i64_eq(a,d("MessagingThreadType.bs").group))return!0;else return!1}function i(a){if(a==="e2ee_cutover")return!0;else return a==="inbox"}function j(a){return d("LSThreadBitOffset.bs").has(d("LSThreadCapabilityBitOffset.bs").messageRequestComposerBanner,a)}function k(a){return c("bs_caml").i64_eq(a.parentThreadKey,d("LsSystemFolder.bs").spam)}function l(a){return c("bs_caml").i64_eq(a.parentThreadKey,d("LsSystemFolder.bs").businessSupport)}a=a;b=b;e=e;f=f;h=h;i=i;j=j;k=k;l=l;g.isGroup=a;g.isOneToOne=b;g.isSecure=e;g.ofThreadId=f;g.isRecentsSectionAllowedTypes=h;g.isMessengerOrE2EEInbox=i;g.isMessageRequest=j;g.isHiddenRequest=k;g.isBusinessSupportThread=l}),98);
__d("LSShape",["LSDict"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return c("LSDict").fromObject(a)}function b(a){return c("LSDict").shapeToRecord(a)}g.ofRecord=a;g.toRecord=b}),98);
__d("LSDatascriptEvaluator",["FBLogger","LS.re","MWPBumpEntityKey.re","QPLUserFlow","createTrustedFunction","createTrustedScriptWithoutValidation_DO_NOT_USE","qpl","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a,e){return function(e){if(e==null)throw c("FBLogger")("messenger_comet").mustfixThrow("Error creating eval function, db is undefined. This is likely a currying error in the definition for LSDatascriptEvaluator");return function(f){var g,h,i,j,k,l,m;return b("regeneratorRuntime").async(function(n){while(1)switch(n.prev=n.next){case 0:g=f.experiments,h=f.priority,i=f.syncScript;j=g!=null?JSON.parse(g):null;k=function(a){return function(b,c){var d;return j==null?void 0:(d=j.qe)==null?void 0:(d=d[b])==null?void 0:(b=d[a])==null?void 0:b[c]}};l=new Proxy({getBool:k("fb"),getNumber:k("fb"),getString:k("fb")},{get:function(a,b){return b in a?a[b]:{getBool:k(b),getNumber:k(b),getString:k(b)}}});m=function(a){var b;return j==null?void 0:(b=j.gk)==null?void 0:b[a]};n.prev=5;return n.abrupt("return",e.runInTransaction(function(d){var e,f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:a&&a();c("QPLUserFlow").start(c("qpl")._(25306949,"1105"),{cancelOnUnload:!0});e=c("createTrustedFunction")(c("createTrustedScriptWithoutValidation_DO_NOT_USE")("gkx"),c("createTrustedScriptWithoutValidation_DO_NOT_USE")("qex"),c("createTrustedScriptWithoutValidation_DO_NOT_USE")("return "+i));g.next=5;return b("regeneratorRuntime").awrap(e(m,l)(c("LS.re").make(d)));case 5:f=g.sent;c("QPLUserFlow").endSuccess(c("qpl")._(25306949,"1105"));return g.abrupt("return",f);case 8:case"end":return g.stop()}},null,this)},"readwrite",h));case 9:n.prev=9;n.t0=n["catch"](5);d("MWPBumpEntityKey.re").bumpEntityKeyWithAppId("lsplatform","eval_datascript_failure");c("FBLogger")("messenger_web_product").catching(n.t0).mustfix("Error executing sync script");c("QPLUserFlow").endFailure(c("qpl")._(25306949,"1105"),n.t0.message);throw n.t0;case 16:case"end":return n.stop()}},null,this,[[5,9]])}}}a.__debugModuleName="LSDatascriptEvaluator";g["default"]=a}),98);
__d("LSDatascriptEvaluatorDeferred",["MWDetectDbSupport","regeneratorRuntime","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("LSDatascriptEvaluator").__setRef("LSDatascriptEvaluatorDeferred"),i=c("requireDeferred")("LSDatascriptEvaluatorMaybeSandbox").__setRef("LSDatascriptEvaluatorDeferred");a=function(){var a;return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:c.next=2;return b("regeneratorRuntime").awrap(d("MWDetectDbSupport").isIndexedDbSupported());case 2:a=c.sent;return c.abrupt("return",(a?i:h).load());case 4:case"end":return c.stop()}},null,this)};e=a;g["default"]=e}),98);
__d("LSDatascriptEvaluatorMaybeSandbox",["cr:3258","cr:5109"],(function(a,b,c,d,e,f,g){"use strict";a=b("cr:3258")||b("cr:5109");c=a;g["default"]=c}),98);
__d("ArmadilloDataTraceType.bs",[],(function(a,b,c,d,e,f){"use strict";a=[0,13];f.armadilloMessageSend=a}),66);
__d("LsDataTraceFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1743851");c=b("FalcoLoggerInternal").create("ls_data_trace",a);e.exports=c}),null);
__d("LSDataTraceFlush.bs",["ArmadilloDataTraceType.bs","LSDataTraceType.bs","LSInt64.bs","LSTransaction.bs","LsDataTraceFalcoEvent","ODS","Promise","ReQL.bs","bs_belt_Option","bs_caml","bs_caml_int64","bs_caml_option","bs_int64","clearTimeout","promiseDone","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,d){var e=a.length;if(e===0)return[c("bs_caml_int64").neg_one,c("bs_caml_int64").neg_one,void 0,void 0,void 0];e=a.find(function(a){return a.errorMessage!==void 0});e=c("bs_belt_Option").mapWithDefault(e===void 0?void 0:c("bs_caml_option").some(e),void 0,function(a){return a.errorMessage});a=a[a.length-1|0];var f=c("bs_caml_int64").of_float(Date.now()),g=[0,12e4],h=a.timestampMs;g=c("bs_int64").compare(c("bs_caml_int64").sub(f,d),g)>=0;return!b&&g?[c("bs_caml_int64").sub(f,d),a.checkPointId,h,e,"trace expired"]:[c("bs_caml_int64").sub(h,d),a.checkPointId,h,e,e]}function i(a){return a.reduce(function(a,b,d){var e=c("bs_int64").to_string(b.checkPointId),f=b.timestampMs,g=c("bs_int64").to_string(c("bs_belt_Option").getWithDefault(b.syncChannel,c("bs_caml_int64").neg_one));b=b.tags;b=b!==void 0?","+b:"";if(d===0)a.pointsList="".concat("(",e,",",g,b,")");else{d=String(c("bs_caml_int64").to_int32(c("bs_caml_int64").sub(f,a.lastCheckPointTimestamp)));a.pointsList=a.pointsList.concat("-",d,"-(",e,",",g,b,")")}a.lastCheckPointTimestamp=f;return a},{lastCheckPointTimestamp:c("bs_caml_int64").zero,pointsList:""}).pointsList}var j=[0,2];function k(a,b){var e=b.traceId,f=b.shouldFlush,g=b.traceType,k=c("bs_caml").i64_eq(g,d("LSDataTraceType.bs").task)?"send":c("bs_caml").i64_eq(g,d("ArmadilloDataTraceType.bs").armadilloMessageSend)?"armadillo send":c("bs_caml").i64_eq(g,d("LSDataTraceType.bs").encryptedBackupsInit)?"encrypted_backups_init":c("bs_caml").i64_eq(g,d("LSDataTraceType.bs").encryptedBackupsAddDevice)?"encrypted_backups_add_device":c("bs_caml").i64_eq(g,d("LSDataTraceType.bs").encryptedBackupsUpload)?"encrypted_backups_upload":c("bs_caml").i64_eq(g,d("LSDataTraceType.bs").encryptedBackupsRestore)?"encrypted_backups_restore":c("bs_caml").i64_eq(g,d("LSDataTraceType.bs").encryptedBackupsMediaBackup)?"encrypted_backups_media_backup":c("bs_caml").i64_eq(g,d("LSDataTraceType.bs").encryptedBackupsSyncEpochs)?"encrypted_backups_sync_epochs":c("bs_caml").i64_eq(g,d("LSDataTraceType.bs").sapVestaLogin)?"sap_vesta_login":c("bs_caml").i64_eq(g,d("LSDataTraceType.bs").sapVestaRegistration)?"sap_vesta_registration":c("bs_caml").i64_eq(g,d("LSDataTraceType.bs").encryptedBackupsOptOutOfBackup)?"encrypted_backups_opt_out_of_backup":c("bs_caml").i64_eq(g,d("LSDataTraceType.bs").encryptedBackupsFetchBackupsMetadata)?"encrypted_backups_fetch_backups_metadata":c("bs_caml").i64_eq(g,d("LSDataTraceType.bs").encryptedBackupsCreateExtraVirtualDevice)?"encrypted_backups_create_extra_virtual_device":c("bs_caml").i64_eq(g,d("LSDataTraceType.bs").encryptedBackupsFetchBackupStatus)?"encrypted_backups_fetch_backup_status":c("bs_caml").i64_eq(g,d("LSDataTraceType.bs").encryptedBackupsThirdPartyIdGeneration)?"encrypted_backups_third_party_id_generation":c("bs_caml").i64_eq(g,d("LSDataTraceType.bs").encryptedBackupsMediaRestore)?"encrypted_backups_media_restore":c("bs_caml").i64_eq(g,d("LSDataTraceType.bs").encryptedBackupsDeleteBackup)?"encrypted_backups_delete_backup":c("bs_caml").i64_eq(g,d("LSDataTraceType.bs").encryptedBackupsShadowInit)?"shadow_encrypted_backups_init":c("bs_caml").i64_eq(g,d("LSDataTraceType.bs").encryptedBackupsShadowAddDevice)?"shadow_encrypted_backups_add_device":c("bs_caml").i64_eq(g,d("LSDataTraceType.bs").encryptedBackupsShadowUpload)?"shadow_encrypted_backups_upload":c("bs_caml").i64_eq(g,d("LSDataTraceType.bs").encryptedBackupsShadowRestore)?"shadow_encrypted_backups_restore":c("bs_caml").i64_eq(g,d("LSDataTraceType.bs").encryptedBackupsShadowDeleteBackup)?"shadow_encrypted_backups_delete_backup":b.contextTwo;g=b.traceType;var l=c("bs_caml").i64_eq(g,d("ArmadilloDataTraceType.bs").armadilloMessageSend)?"tam_message_send":b.contextOne,m=c("bs_caml").i64_eq(b.traceType,j)?void 0:b.predefinedId,n=b.initTimestampMs;return d("ReQL.bs").toArray(d("ReQL.bs").getKeyRange(d("ReQL.bs").fromIndexAscending(a.table("data_trace_addon").index("traceIdAddonId")),{hd:e,tl:0})).then(function(a){var b=h(a,f,n),g=b[4],j=b[3],o=b[1],p=b[0],q=a.length,r=i(a);c("LsDataTraceFalcoEvent").log(function(){return{check_point_count:c("bs_caml_option").some(d("LSInt64.bs").string(c("bs_caml_int64").of_int32(q))),check_point_list:r,client_event_ts:c("bs_caml_option").some(d("LSInt64.bs").string(c("bs_caml_int64").of_float(Date.now()))),cold_start_time:void 0,data_trace_id:e,database_id:l,delivered_messages:void 0,error_message:g,first_error_message:j,has_backgrounded:!1,last_check_point:c("bs_caml_option").some(d("LSInt64.bs").string(o)),latency:c("bs_caml_option").some(d("LSInt64.bs").string(p)),media_type:void 0,num_of_attachments:void 0,persisted_metadata:void 0,predefined_id:m,sent_rich_media_messages:void 0,sent_text_messages:void 0,start_time:c("bs_caml_option").some(d("LSInt64.bs").string(n)),trace_flow:c("bs_belt_Option").getWithDefault(k,"")}})}).then(function(b){return a.table("data_trace_meta")["delete"]({hd:e,tl:0})})}function a(a,c){return d("ReQL.bs").first(d("ReQL.bs").getKeyRange(d("ReQL.bs").fromTableAscending(a.table("data_trace_meta")),{hd:c,tl:0})).then(function(c){if(c!==void 0)return k(a,c);else return b("Promise").resolve()})}var l={contents:void 0};function m(a){var e=[0,12e4];return d("LSTransaction.bs").run(a,function(a){return d("ReQL.bs").toArray(d("ReQL.bs").bounds(d("ReQL.bs").getKeyRange(d("ReQL.bs").fromIndexAscending(a.table("data_trace_meta").index("shouldFlushInitTimestampMsTraceId")),{hd:!1,tl:0}),{NAME:"lessThan",VAL:{hd:c("bs_caml_int64").sub(c("bs_caml_int64").of_float(Date.now()),e),tl:0}})).then(function(c){return b("Promise").all(c.map(function(b){return k(a,b)}))})},"readWrite")}function n(a){a=l.contents;if(a!==void 0){c("clearTimeout")(c("bs_caml_option").valFromOption(a));return}}function o(a){c("promiseDone")(m(a),function(b){n();b=c("setTimeout")(function(b){o(a)},6e4);l.contents=c("bs_caml_option").some(b)},function(a){n(),d("ODS").bumpEntityKey(3185,"mw_trace","error")});return n}e=[0,4];f=[0,5];var p=j;e=e;f=f;var q=k;a=a;var r=n,s=o;g.dataTraceSync=p;g.dataTraceRichMediaSend=e;g.dataTraceRichMediaDownload=f;g.flushForTraceMeta=q;g.flush=a;g.stopFlushExpiredDataTraces=r;g.flushExpiredDataTraces=s}),98);
__d("IGDSDialogItem.react",["IGDSBox.react","IGDSSpinner.react","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i={item:{fontSize:"xvs91rp",backgroundColor:"xjbqb8w",borderBottom:"xaqea5y",borderStart:"xav7gou",borderEnd:"x1b1mbwd",borderTop:"xtuw4uo",cursor:"x1ypdohk",lineHeight:"x1evy7pa",marginTop:"xdj266r",marginEnd:"x11i5rnm",marginBottom:"xat24cr",marginStart:"x1mh8g0r",minHeight:"x1wxaq2x",paddingTop:"x1iorvi4",paddingEnd:"x1sxyh0",paddingBottom:"xjkvuk6",paddingStart:"xurb0ha",textAlign:"x2b8uid",userSelect:"x87ps6o",verticalAlign:"xxymvpz",":active_backgroundColor":"x52vrxo",":active_opacity":"x4gyw5p",$$css:!0},section:{cursor:"xt0e3qv",fontSize:"xvs91rp",backgroundColor:"xjbqb8w",marginTop:"xdj266r",marginEnd:"x11i5rnm",marginBottom:"xat24cr",marginStart:"x1mh8g0r",minHeight:"x1wxaq2x",paddingTop:"x1iorvi4",paddingEnd:"x1sxyh0",paddingBottom:"xjkvuk6",paddingStart:"xurb0ha",textAlign:"x2b8uid",userSelect:"x87ps6o",$$css:!0},itemSecondary:{color:"x5n08af",$$css:!0},itemPrimary:{color:"x173jzuc",fontWeight:"x1xlr1w8",$$css:!0},itemDanger:{color:"xkmlbd1",fontWeight:"x1xlr1w8",$$css:!0},itemDisabled:{color:"x1roi4f4",cursor:"xt0e3qv",$$css:!0}};function a(a){var b=a.children,d=a.color;d=d===void 0?"secondaryButton":d;var e=a.disabled;e=e===void 0?!1:e;var f=a.loading;f=f===void 0?!1:f;a=a.onClick;return h.jsx("button",{className:c("stylex")([i.item,d==="errorOrDestructive"&&i.itemDanger,d==="primaryButton"&&i.itemPrimary,d==="secondaryButton"&&i.itemSecondary,e&&i.itemDisabled]),disabled:f||e,onClick:a,tabIndex:"0",children:f===!0?h.jsx(c("IGDSBox.react"),{alignItems:"center",children:h.jsx(c("IGDSSpinner.react"),{size:"small"})}):b})}a.displayName=a.name+" [from "+f.id+"]";function b(a){return h.jsx("div",{className:"xt0e3qv xvs91rp xjbqb8w xdj266r x11i5rnm xat24cr x1mh8g0r x1wxaq2x x1iorvi4 x1sxyh0 xjkvuk6 xurb0ha x2b8uid x87ps6o",children:a.children})}b.displayName=b.name+" [from "+f.id+"]";g.IGDSDialogItem=a;g.IGDSDialogSection=b}),98);
__d("MessagingAttachmentType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];e=[0,3];b=[0,4];var g=[0,5],h=[0,6],i=[0,7],j=[0,8],k=[0,9],l=[0,10],m=[0,12];f.none=a;f.sticker=c;f.image=d;f.animatedImage=e;f.video=b;f.audio=g;f.file=h;f.xma=i;f.ephemeralImage=j;f.ephemeralVideo=k;f.selfieSticker=l;f.soundBite=m}),null);